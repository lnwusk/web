# GitHub Actions CI/CD è®¾ç½®æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®å·²é…ç½®å®Œæ•´çš„GitHub ActionsæŒç»­é›†æˆ/æŒç»­éƒ¨ç½²æµç¨‹ï¼ŒåŒ…æ‹¬ä»£ç è´¨é‡æ£€æŸ¥ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€å®‰å…¨æ‰«æå’Œè‡ªåŠ¨éƒ¨ç½²ã€‚

## ğŸš€ å·¥ä½œæµç¨‹

### 1. CI/CD Pipeline (`.github/workflows/ci.yml`)

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€åˆ° `main` æˆ– `develop` åˆ†æ”¯
- åˆ›å»º Pull Request åˆ° `main` æˆ– `develop` åˆ†æ”¯

**æ‰§è¡Œæ­¥éª¤ï¼š**
1. **ä»£ç è´¨é‡æ£€æŸ¥ (Lint)**
   - å‰ç«¯ ESLint æ£€æŸ¥
   - åç«¯ ESLint æ£€æŸ¥
   - ä»£ç æ ¼å¼æ£€æŸ¥

2. **å‰ç«¯æµ‹è¯•å’Œæ„å»º**
   - å®‰è£…ä¾èµ–
   - è¿è¡Œæµ‹è¯•
   - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
   - ä¸Šä¼ æ„å»ºäº§ç‰©

3. **åç«¯æµ‹è¯•**
   - å¯åŠ¨ MySQL æµ‹è¯•æ•°æ®åº“
   - å®‰è£…ä¾èµ–
   - è¿è¡Œå•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•

4. **é›†æˆæµ‹è¯•**
   - å‰åç«¯è”åˆæµ‹è¯•
   - API æ¥å£æµ‹è¯•

5. **å®‰å…¨æ‰«æ**
   - npm audit å®‰å…¨æ¼æ´æ£€æŸ¥
   - CodeQL ä»£ç å®‰å…¨åˆ†æ

6. **éƒ¨ç½²å‡†å¤‡**
   - æ‰“åŒ…éƒ¨ç½²æ–‡ä»¶
   - ä¸Šä¼ éƒ¨ç½²äº§ç‰©

### 2. ä»£ç è´¨é‡æ£€æŸ¥ (`.github/workflows/code-quality.yml`)

**åŠŸèƒ½ï¼š**
- ä»£ç é£æ ¼æ£€æŸ¥
- æ ¼å¼åŒ–æ£€æŸ¥
- æµ‹è¯•è¦†ç›–ç‡æ£€æŸ¥
- ä¸Šä¼ è¦†ç›–ç‡æŠ¥å‘Šåˆ° Codecov

### 3. è‡ªåŠ¨éƒ¨ç½² (`.github/workflows/deploy.yml`)

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€åˆ° `main` åˆ†æ”¯
- CI/CD Pipeline æˆåŠŸå®Œæˆ

**éƒ¨ç½²ç›®æ ‡ï¼š**
- å‰ç«¯ï¼šVercel
- åç«¯ï¼šRailway

## ğŸ› ï¸ æœ¬åœ°å¼€å‘è®¾ç½®

### å®‰è£…ä¾èµ–

```bash
# å‰ç«¯
cd frontend
npm install

# åç«¯
cd backend
npm install
```

### è¿è¡Œæµ‹è¯•

```bash
# å‰ç«¯æµ‹è¯•
cd frontend
npm test
npm run test:coverage

# åç«¯æµ‹è¯•
cd backend
npm test
npm run test:coverage
```

### ä»£ç è´¨é‡æ£€æŸ¥

```bash
# å‰ç«¯
cd frontend
npm run lint
npm run lint:fix
npm run check-format
npm run format

# åç«¯
cd backend
npm run lint
npm run lint:fix
npm run check-format
npm run format
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­æ·»åŠ ä»¥ä¸‹ Secretsï¼š

**Vercel éƒ¨ç½²ï¼š**
- `VERCEL_TOKEN`: Vercel API Token
- `VERCEL_ORG_ID`: Vercel ç»„ç»‡ ID
- `VERCEL_PROJECT_ID`: Vercel é¡¹ç›® ID

**Railway éƒ¨ç½²ï¼š**
- `RAILWAY_TOKEN`: Railway API Token
- `RAILWAY_SERVICE`: Railway æœåŠ¡åç§°

### æ•°æ®åº“é…ç½®

CI ç¯å¢ƒä½¿ç”¨ MySQL 8.0 æµ‹è¯•æ•°æ®åº“ï¼š
- ä¸»æœºï¼šlocalhost
- ç«¯å£ï¼š3306
- æ•°æ®åº“ï¼šsports_room_test
- ç”¨æˆ·ï¼šroot
- å¯†ç ï¼štest123456

## ğŸ“Š ç›‘æ§å’ŒæŠ¥å‘Š

### æµ‹è¯•è¦†ç›–ç‡

- å‰ç«¯ï¼šVitest + @vitest/coverage-v8
- åç«¯ï¼šJest
- æŠ¥å‘Šå¹³å°ï¼šCodecov

### ä»£ç è´¨é‡

- ESLintï¼šä»£ç è§„èŒƒæ£€æŸ¥
- Prettierï¼šä»£ç æ ¼å¼åŒ–
- CodeQLï¼šå®‰å…¨æ¼æ´æ‰«æ

## ğŸ”„ è‡ªåŠ¨åŒ–æ›´æ–°

### Dependabot

é…ç½®äº†è‡ªåŠ¨ä¾èµ–æ›´æ–°ï¼š
- æ¯å‘¨ä¸€ä¸Šåˆ 9:00 æ£€æŸ¥æ›´æ–°
- å‰ç«¯å’Œåç«¯åˆ†åˆ«ç®¡ç†
- è‡ªåŠ¨åˆ›å»º Pull Request

### å·¥ä½œæµæ›´æ–°

- GitHub Actions è‡ªåŠ¨æ›´æ–°
- å®‰å…¨è¡¥ä¸è‡ªåŠ¨åº”ç”¨

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æµ‹è¯•å¤±è´¥**
   - æ£€æŸ¥æ•°æ®åº“è¿æ¥
   - éªŒè¯ç¯å¢ƒå˜é‡
   - æŸ¥çœ‹æµ‹è¯•æ—¥å¿—

2. **æ„å»ºå¤±è´¥**
   - æ£€æŸ¥ä¾èµ–ç‰ˆæœ¬å…¼å®¹æ€§
   - éªŒè¯ Node.js ç‰ˆæœ¬
   - æŸ¥çœ‹æ„å»ºæ—¥å¿—

3. **éƒ¨ç½²å¤±è´¥**
   - æ£€æŸ¥éƒ¨ç½²å‡­æ®
   - éªŒè¯ç›®æ ‡å¹³å°é…ç½®
   - æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—

### è°ƒè¯•æ­¥éª¤

1. æŸ¥çœ‹ GitHub Actions æ—¥å¿—
2. æ£€æŸ¥æœ¬åœ°æµ‹è¯•æ˜¯å¦é€šè¿‡
3. éªŒè¯ç¯å¢ƒå˜é‡é…ç½®
4. ç¡®è®¤ä¾èµ–ç‰ˆæœ¬å…¼å®¹æ€§

## ğŸ“ˆ æœ€ä½³å®è·µ

1. **æäº¤å‰æ£€æŸ¥**
   ```bash
   # è¿è¡Œæ‰€æœ‰æ£€æŸ¥
   npm run lint && npm run test && npm run build
   ```

2. **åˆ†æ”¯ç­–ç•¥**
   - `main`: ç”Ÿäº§ç¯å¢ƒ
   - `develop`: å¼€å‘ç¯å¢ƒ
   - åŠŸèƒ½åˆ†æ”¯ï¼š`feature/åŠŸèƒ½åç§°`

3. **æäº¤ä¿¡æ¯è§„èŒƒ**
   - `feat:` æ–°åŠŸèƒ½
   - `fix:` ä¿®å¤
   - `docs:` æ–‡æ¡£
   - `style:` æ ¼å¼
   - `refactor:` é‡æ„
   - `test:` æµ‹è¯•
   - `chore:` æ„å»º

4. **ä»£ç å®¡æŸ¥**
   - æ‰€æœ‰ PR éœ€è¦ä»£ç å®¡æŸ¥
   - æµ‹è¯•è¦†ç›–ç‡è¦æ±‚ > 80%
   - ä»£ç è´¨é‡æ£€æŸ¥å¿…é¡»é€šè¿‡

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)
- [Vercel éƒ¨ç½²æ–‡æ¡£](https://vercel.com/docs)
- [Railway éƒ¨ç½²æ–‡æ¡£](https://docs.railway.app)
- [Codecov æ–‡æ¡£](https://docs.codecov.io) 